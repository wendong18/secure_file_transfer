# 安全文件传输系统

这是一个基于C/S架构的安全文件传输系统，使用国密算法实现了安全的文件上传、下载、管理等功能。

## 功能特性

- 用户认证：基于SM3哈希算法的密码存储，加盐保护
- 文件加密传输：使用SM4对称加密算法
- 数字签名：使用SM2非对称加密算法
- 混合密码系统：结合SM2和SM4实现高效安全的数据传输
- 访问控制：基于用户权限的文件访问控制
- 审计功能：详细的操作日志记录
- 多线程服务器：高并发处理客户端请求

## 系统架构

- 服务器端：C语言实现，多线程处理客户端请求
- 客户端：QT图形界面，C++实现
- 数据库：SQLite本地数据库

## 国密算法实现

- **SM3算法**：用于密码哈希存储，确保密码安全
- **SM4算法**：用于文件数据的加密和解密
- **SM2算法**：用于数字签名和密钥交换
- **混合密码系统**：使用SM2加密SM4密钥，SM4加密文件数据

## 编译和运行

### 依赖项

- GCC/G++ 编译器
- SQLite3
- GmSSL（国密算法库）
- Qt5（客户端GUI）
- pthread（多线程支持）

### 编译

```bash
# 编译所有组件
make all

# 仅编译服务器
make server

# 仅编译客户端
make client
```

### 运行

```bash
# 启动服务器
./server

# 启动客户端
./client
```

## 安全设计

1. **身份鉴别**：
   - 密码使用SM3算法哈希存储，加盐保护
   - 用户登录时验证密码哈希

2. **访问控制**：
   - 基于用户角色的访问控制
   - 文件权限分级：公开、私有、管理员专用

3. **数据保护**：
   - 使用SM4算法加密文件内容
   - 使用SM2算法进行密钥交换和数字签名

4. **审计功能**：
   - 记录所有用户操作
   - 记录文件访问和修改历史

## 系统结构

- `src/server/`：服务器端代码
- `src/client/`：客户端代码
- `src/db/`：数据库操作相关代码
- `src/utils/`：工具函数，包括SM3实现
- `include/`：头文件
- `uploads/`：服务器端文件存储目录








